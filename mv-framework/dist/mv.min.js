"use strict";angular.module("mvFramework",[]),angular.module("mvFramework").directive("mv-text",function(configFactory,$filter){return{restrict:"E",scope:{path:"@"},templateUrl:"template/mv-text.html",link:function(scope,element,attr){function getConfig(){return scope.config=configFactory.getField(scope.path),scope}function setupConfig(){scope.content=$filter("limitTo:"+scope.config.text.maxCharacters)(scope.config.text.value),scope.styles.whiteSpace=scope.config.text.singleLine?"no-wrap":"normal",angular.forEach(scope.config.styles,function(style){scope.styles[style.name]=style.value})}scope.config=null,scope.styles={},scope.content=null,scope.getConfig=getConfig,scope.setupConfig=setupConfig,scope.getConfig().setupConfig()}}}),angular.module("mvFramework").run(["$templateCache",function($templateCache){$templateCache.put("template/mv-text.html",'<div ng-bind="content" ng-style="styles"></div>')}]),angular.module("mvFramework").factory("mvConfig",function(mvLoader){function loadConfig(){scope.config=angular.copy(mvLoader.loadConfig())}function getField(path){angular.forEach(scope.config.fields,function(){})}var scope=this;return scope.config=null,scope.loadConfig=loadConfig,scope.getField=getField,scope}),angular.module("mvFramework").factory("errorHandler",function(){var scope=this;return scope}),angular.module("mvFramework").service("gridChecker",function(gridProvider){function check(componentConfig,prop){function getClasses(){return grid["class"].indexOf("ls")>-1?["xsls","sls","mls","lls","ls","sq","pt","lpt","mpt","spt","xspt"]:grid["class"].indexOf("sq")>-1?["tsq","sq","wsq","ls","pt","lls","lpt","mls","mpt","sls","spt","xsls","xspt"]:["xspt","spt","mpt","lpt","pt","sq","ls","lls","mls","sls","xsls"]}var grid=gridProvider.grid,classes=getClasses();return"undefined"==typeof componentConfig[prop][grid["class"]]?componentConfig[prop][classes.slice(classes.indexOf(grid["class"]+1)).filter(function(className){return"undefined"!=typeof componentConfig[prop][className]})[0]]:void 0}var service=this;return service.check=check,service}),angular.module("mvFramework").factory("gridProvider",function(){function setupGrid(windowHeight,windowWidth){scope.grid["class"]=setRatioClass(windowWidth/windowHeight),scope.grid.unitHeight=windowHeight/24,scope.grid.unitWidth=windowWidth/24}function setRatioClass(ratio){switch(!0){case.1>ratio:return"xspt";case.2>ratio:return"spt";case.5>ratio:return"mpt";case.64>ratio:return"lpt";case.9>ratio:return"pt";case.96>ratio:return"tsq";case 1.1>ratio:return"sq";case 1.22>ratio:return"wsq";case 1.7>ratio:return"ls";case 2>ratio:return"lls";case 3>ratio:return"mls";case 5>ratio:return"sls";case ratio>5:return"xsls"}}var scope=this;return scope.grid=null,scope.setupGrid=setupGrid,scope}),angular.module("mvFramework").provider("mvLoader",function($http,errorHandler){function Loader(){this.loadJson=function(){return $http.get(jsonPath).success(function(data){return data}).error(function(){errorHandler.report(101)})}}var jsonPath="config.json";this.setJsonPath=function(p){jsonPath=p},this.$get=function(){return new Loader}});